@tailwind base;
@tailwind components;
@tailwind utilities;

/* Definition of the premium design system with improved Dutch readability */

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 261 9% 9%;

    --card: 0 0% 100%;
    --card-foreground: 261 9% 9%;

    --popover: 0 0% 100%;
    --popover-foreground: 261 9% 9%;

    --primary: 351 100% 43%;
    --primary-foreground: 0 0% 100%;

    --secondary: 0 0% 96%;
    --secondary-foreground: 261 9% 9%;

    --muted: 0 0% 96%;
    --muted-foreground: 0 0% 45%;

    --accent: 0 0% 96%;
    --accent-foreground: 261 9% 9%;

    --destructive: 0 85% 60%;
    --destructive-foreground: 0 0% 100%;

    --border: 0 0% 90%;
    --input: 0 0% 90%;
    --ring: 351 100% 43%;

    --radius: 0.75rem;

    --sidebar-background: 0 0% 100%;
    --sidebar-foreground: 261 9% 9%;
    --sidebar-primary: 351 100% 43%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 0 0% 96%;
    --sidebar-accent-foreground: 261 9% 9%;
    --sidebar-border: 0 0% 90%;
    --sidebar-ring: 351 100% 43%;
  }

  .dark {
    --background: 261 9% 9%;
    --foreground: 0 0% 100%;

    --card: 264 7% 15%;
    --card-foreground: 0 0% 100%;

    --popover: 261 9% 9%;
    --popover-foreground: 0 0% 100%;

    --primary: 351 100% 43%;
    --primary-foreground: 0 0% 100%;

    --secondary: 257 6% 25%;
    --secondary-foreground: 0 0% 100%;

    --muted: 257 6% 25%;
    --muted-foreground: 0 0% 64%;

    --accent: 257 6% 25%;
    --accent-foreground: 0 0% 100%;

    --destructive: 0 63% 31%;
    --destructive-foreground: 0 0% 100%;

    --border: 257 6% 25%;
    --input: 257 6% 25%;
    --ring: 351 100% 43%;

    --sidebar-background: 261 9% 9%;
    --sidebar-foreground: 0 0% 100%;
    --sidebar-primary: 351 100% 43%;
    --sidebar-primary-foreground: 0 0% 100%;
    --sidebar-accent: 257 6% 25%;
    --sidebar-accent-foreground: 0 0% 100%;
    --sidebar-border: 257 6% 25%;
    --sidebar-ring: 351 100% 43%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground font-body;
    font-feature-settings: "rlig" 1, "calt" 1;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Premium typography classes optimized for Dutch readability */
  .headline-premium {
    @apply font-headline font-bold tracking-tight text-az-black;
    font-feature-settings: "ss01" 1;
    letter-spacing: -0.02em;
  }

  .body-premium {
    @apply font-body text-premium-gray-700 leading-relaxed;
    font-feature-settings: "kern" 1;
  }

  /* Enhanced article content styling with proper WordPress content formatting */
  .article-content {
    @apply prose prose-lg prose-gray max-w-none;
    overflow-x: hidden; /* Prevent horizontal scrolling */
  }

  .article-content h1 {
    @apply headline-premium text-headline-xl mb-6 mt-8 first:mt-0;
  }

  .article-content h2 {
    @apply headline-premium text-headline-lg mb-4 mt-8 first:mt-0 text-az-black dark:text-white;
  }

  .article-content h3 {
    @apply headline-premium text-headline-md mb-3 mt-6 first:mt-0 text-az-black dark:text-white;
  }

  .article-content h4 {
    @apply headline-premium text-headline-sm mb-3 mt-5 first:mt-0 text-az-black dark:text-white;
  }

  .article-content p {
    @apply body-premium text-body-lg mb-6 leading-relaxed text-premium-gray-700 dark:text-gray-300;
  }

  .article-content ul, .article-content ol {
    @apply mb-6 space-y-2;
  }

  .article-content li {
    @apply body-premium text-body-lg leading-relaxed text-premium-gray-700 dark:text-gray-300;
  }

  .article-content blockquote {
    @apply border-l-4 border-az-red pl-6 italic my-6 text-premium-gray-600 dark:text-gray-400;
  }

  /* Ultra-specific CSS rules to force natural scaling for ALL article images */
  .article-content img,
  .article-content figure img,
  .article-content figure > img,
  .article-content div > img,
  .article-content p > img,
  .wp-content img,
  .wp-block-image img,
  .wp-block-gallery img,
  .article-content .wp-image-1,
  .article-content .wp-image-2,
  .article-content .wp-image-3,
  .article-content .wp-image-4,
  .article-content .wp-image-5,
  .article-content .wp-image-6,
  .article-content .wp-image-7,
  .article-content .wp-image-8,
  .article-content .wp-image-9,
  .article-content [class*="wp-image-"] {
    max-width: 100% !important;
    width: 100% !important;
    height: auto !important;
    aspect-ratio: unset !important;
    object-fit: unset !important;
    display: block;
    margin: 1.5rem auto;
    border-radius: 0.5rem;
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  }

  /* Remove any remaining caption container restrictions */
  .article-content .wp-caption,
  .article-content div[id^="attachment_"],
  .article-content div[class*="wp-caption"] {
    width: 100% !important;
    max-width: 100% !important;
    margin: 1.5rem auto !important;
  }

  /* Clean image caption styling */
  .article-content .image-caption {
    @apply text-sm text-premium-gray-600 dark:text-gray-400 italic mt-2 px-4;
    text-align: center;
    margin: 0.5rem 0 1rem 0;
  }

  /* Ensure featured images keep their styling */
  .article-content img.featured-image {
    aspect-ratio: 16/9;
    object-fit: cover;
  }

  /* Figure and figcaption styling */
  .article-content figure {
    margin: 1.5rem 0;
    text-align: center;
  }

  .article-content figcaption,
  .article-content .wp-caption-text {
    @apply text-sm text-premium-gray-600 dark:text-gray-400 italic mt-2 px-4;
    text-align: center;
  }

  /* Gallery images styling */
  .article-content .wp-block-gallery,
  .article-content .gallery {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin: 1.5rem 0;
  }

  .article-content .wp-block-gallery img,
  .article-content .gallery img {
    margin: 0;
    width: 100%;
    height: auto;
  }

  /* Mobile specific improvements */
  @media (max-width: 768px) {
    .article-content img,
    .article-content figure img {
      margin: 1rem auto;
      border-radius: 0.25rem;
    }
    
    .article-content .wp-block-gallery,
    .article-content .gallery {
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 0.5rem;
    }
  }

  .article-content a {
    @apply text-az-red hover:underline font-medium dark:text-red-400;
  }

  .article-content strong, .article-content b {
    @apply font-semibold text-az-black dark:text-white;
  }

  .article-content em, .article-content i {
    @apply italic;
  }

  /* Custom text selection - Remove yellow highlights */
  ::selection {
    background-color: hsl(var(--primary));
    color: white;
  }

  ::-moz-selection {
    background-color: hsl(var(--primary));
    color: white;
  }

  .article-content ::selection {
    background-color: hsl(var(--primary));
    color: white;
  }

  .article-content ::-moz-selection {
    background-color: hsl(var(--primary));
    color: white;
  }

  /* Custom scrollbar for premium feel */
  ::-webkit-scrollbar {
    width: 6px;
  }

  ::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-premium-gray-300 rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-az-red;
  }

  /* ENHANCED DISQUS DARK MODE STYLING WITH FILTER APPROACH */
  
  /* Primary approach: CSS filter inversion for dark mode */
  .dark .disqus-inverted iframe {
    filter: invert(1) hue-rotate(180deg) !important;
    background-color: #1f2937 !important;
  }
  
  /* Secondary approach: Direct styling attempts */
  .dark .disqus-dark-mode iframe,
  .dark .disqus-dark-theme iframe {
    background-color: #1a171b !important;
    color: #ffffff !important;
  }

  /* Force dark mode styling on Disqus container */
  .dark .disqus-dark-mode,
  .dark .disqus-dark-theme {
    background-color: #1f2937 !important;
    color: #ffffff !important;
  }

  /* Enhanced targeting for Disqus content */
  .dark #disqus_thread {
    background-color: #1f2937 !important;
    color: #ffffff !important;
  }

  /* Attempt to style iframe content (limited by CORS) */
  .dark #disqus_thread iframe {
    background-color: #1f2937 !important;
  }

  /* Filter-based approach for the entire Disqus container in dark mode */
  .dark .disqus-inverted {
    filter: invert(0.9) hue-rotate(180deg);
    background-color: #1f2937 !important;
  }

  /* Preserve certain elements from being inverted */
  .dark .disqus-inverted img,
  .dark .disqus-inverted video,
  .dark .disqus-inverted [data-preserve-color] {
    filter: invert(1) hue-rotate(180deg);
  }

  /* Alternative: Brightness and contrast adjustments */
  .dark .disqus-dark-mode iframe {
    filter: brightness(0.8) contrast(1.2) !important;
  }

  /* Ensure buttons and interactive elements remain functional */
  .dark #disqus_thread button,
  .dark #disqus_thread input,
  .dark #disqus_thread textarea {
    background-color: #374151 !important;
    color: #ffffff !important;
    border-color: #4b5563 !important;
  }

  /* Links should remain visible and functional */
  .dark #disqus_thread a {
    color: #dc2626 !important;
  }

  /* Fallback for when filter approach affects readability */
  .dark .disqus-inverted * {
    text-shadow: none !important;
  }
}

/* Premium button styles */
@layer components {
  .btn-primary {
    @apply bg-az-red hover:bg-red-700 text-white font-medium px-6 py-3 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md font-body transform hover:scale-105 active:scale-95;
  }

  .btn-secondary {
    @apply bg-white hover:bg-premium-gray-50 text-az-black font-medium px-6 py-3 rounded-lg border border-premium-gray-200 transition-all duration-200 shadow-sm hover:shadow-md font-body transform hover:scale-105 active:scale-95;
  }

  /* Premium card styles */
  .card-premium {
    @apply bg-white rounded-xl shadow-sm border border-premium-gray-100 hover:shadow-md transition-all duration-200;
  }

  /* Breaking news indicator */
  .breaking-news {
    @apply bg-az-red text-white px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wide font-body;
  }

  /* Enhanced micro-interactions */
  .interactive-card {
    @apply transform transition-all duration-300 hover:scale-[1.02] hover:shadow-lg;
  }

  .interactive-button {
    @apply transform transition-all duration-200 hover:scale-105 active:scale-95 hover:shadow-lg;
  }

  .interactive-icon {
    @apply transform transition-all duration-200 hover:scale-110 hover:text-az-red;
  }

  /* Audio Player Slider Styling - Force AZ Red */
  .audio-slider [data-radix-slider-track] {
    @apply bg-premium-gray-200 dark:bg-gray-700;
  }

  .audio-slider [data-radix-slider-range] {
    @apply bg-az-red;
  }

  .audio-slider [data-radix-slider-thumb] {
    @apply bg-az-red border-az-red hover:bg-red-700 focus:ring-az-red;
  }

  .audio-slider [data-radix-slider-thumb]:focus {
    @apply ring-2 ring-az-red ring-offset-2;
  }

  /* Remove all animations and transitions for users who prefer reduced motion */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Accessibility classes */
  .reduce-motion *,
  .reduce-motion *::before,
  .reduce-motion *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .high-contrast {
    --premium-gray-50: hsl(0, 0%, 100%);
    --premium-gray-100: hsl(0, 0%, 95%);
    --premium-gray-200: hsl(0, 0%, 10%);
    --premium-gray-300: hsl(0, 0%, 5%);
    --premium-gray-400: hsl(0, 0%, 0%);
    --premium-gray-500: hsl(0, 0%, 0%);
    --premium-gray-600: hsl(0, 0%, 0%);
    --az-red: hsl(0, 100%, 30%);
    --az-black: hsl(0, 0%, 0%);
  }

  .high-contrast.dark {
    --premium-gray-50: hsl(0, 0%, 0%);
    --premium-gray-100: hsl(0, 0%, 5%);
    --premium-gray-200: hsl(0, 0%, 90%);
    --premium-gray-300: hsl(0, 0%, 95%);
    --premium-gray-400: hsl(0, 0%, 100%);
    --premium-gray-500: hsl(0, 0%, 100%);
    --premium-gray-600: hsl(0, 0%, 100%);
    --az-red: hsl(0, 100%, 60%);
  }

  .screen-reader-mode .sr-only {
    position: static !important;
    width: auto !important;
    height: auto !important;
    padding: 0.25rem !important;
    margin: 0 !important;
    overflow: visible !important;
    clip: auto !important;
    white-space: normal !important;
    background: hsl(var(--premium-gray-100));
    border: 1px solid hsl(var(--premium-gray-300));
  }

  /* Focus improvements */
  *:focus-visible {
    outline: 2px solid hsl(var(--az-red)) !important;
    outline-offset: 2px !important;
  }
}
